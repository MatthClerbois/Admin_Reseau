#mail.wt5mc.ephec-ti.be -> connexion au mail normal ( user : wt5mc@wt5mc.ephec-ti.be / pwd : azerty)
#mail.wt5mc.ephec-ti.be/?/admin -> connexion en tems qu'admin(  user : admin / pwd : 29mai92)

#####

#1) mx record -> nom du domaine ( ajouter un record MX mail.wt5.....) ( osef prio pcq 1 seul serveur mx)
pointer sur juste 'mail' pcq A record dÃ©jÃ  faiavec le Wt5.....

#DL image container "tvial" ( simple, connue, top du top)
#pour lancer tvial, utiliser un docker-compose.yml ("""script/run/xx.conf""" des containers) pcq pas de 
domaine avec les docker runs

#la partie volume du docker compose permet de garder tout en mÃ©moire et de le partager entre les containers

#makeAccount.sh crÃ©Ã© un container temporaire -rm) avec un user et un mdp -> gÃ©nÂ§Ã¨re un user
 dans config-postfix account ( pas de BDD pour le mail !ce container ci n'en utilise pas)

#makeDkim.sh crÃ©Ã© un container temporaire aussi qui permet de vÃ©rifier l'authenticitÃ©dns du serveur mail
 ( il ne doit Ãªtre lancÃ© qu'une seule fo( crÃ© tjr la meme clÃ) car volume persistant) 
# aprÃ¨s gÃ©nÃ©ration de clÃ©, BIND doit ÃtrelmaniipulÃ© en commande car certaines ne sont pas 
dispo wia l'interface webmin ( on rentre la clÃ©crÃ©Ã© dans le recd "txt" du records file)

#on peut lancer le serveur mail! ( 4 ports dans le docker compose ( on n'utilise que le 993[143](rcpt) et 
le 587[25](envoi))avec:
$ docker-compose up -d mail

#installation de l'interface graphique ( container ' rainloop' -> ensemble de scripts php/html qui travaille avec le
serveur mail). le container contient Ã©alement un nginx qui traduit
les requetes http en php ( et transmet au user) 
sans exposer les ports 
#nginx ici, ne fait que transmettre les donnÃ©es

#via rainloop, compte admin de base ( mdp: 12345) DE RAINLOOP =/= compte admin crÃ©Ã© par makeAccounth
 n'a d'admin que le nom !
#dans les options 'domains' rajouter une zone "wt5mc.ephec-ti.be" pour permettre la communication
avec ce domaine + mettre les ports en sÃ©curisÃ©s ( 993 / 587 ) + SSL/TLS et START TLS 
#dans les options, "contact" , rajouter notre db ( .40) ( attention les mails sont stockÃ©s en local
 rainloop n'est qu'une interface)
#dans les options, 'page Title' -> wt5mc
#dans les options, 'login' -> default domain = "wt5mc.ephec-ti.be"



